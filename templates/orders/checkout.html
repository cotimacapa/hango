{% extends 'base.html' %}
{% load static %}
{% block title %}Finalizar Pedido - Hango{% endblock %}

{% block content %}
  <h1 class="title">Finalizar Pedido</h1>

  {% if lines %}
    <table class="table is-fullwidth">
      <thead>
        <tr>
          <th>Item</th>
          <th>Qtd</th>
          <th>Preço</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for l in lines %}
          <tr>
            <td>{{ l.name }}</td>
            <td>{{ l.qty }}</td>
            <td>{{ l.price }}</td>
            <td>{{ l.subtotal }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <p><strong>Total de itens:</strong> {{ total_qty }}</p>
    <p><strong>Total:</strong> {{ total_price }}</p>

    <form method="post" action="">
      {% csrf_token %}
      <div class="field mt-3">
        <label class="label">Observações (opcional)</label>
        <div class="control">
          <textarea name="notes" class="textarea" placeholder="Alguma observação sobre entrega/retirada"></textarea>
        </div>
      </div>

      <div class="buttons mt-4">
        <a class="button is-light" href="{% url 'orders:cart' %}">Voltar para o carrinho</a>
        <button type="submit" class="button is-primary">Fazer pedido</button>
      </div>
    </form>
  {% else %}
    <p>Seu carrinho está vazio.</p>
    <div class="buttons mt-3">
      <a class="button is-light" href="{% url 'orders:cart' %}">Ir para o carrinho</a>
    </div>
  {% endif %}
{% endblock %}
