{% extends "admin/change_form.html" %}
{% load static %}

{% block object-tools-items %}
  {{ block.super }}

  {# NOVO: Ver lista de alunos #}
  {% if can_view_roster and roster_url %}
    <li>
      <a class="button" href="{{ roster_url }}">Ver lista de alunos</a>
    </li>
  {% endif %}

  {# Informativo se já há sucessora #}
  {% if has_next_year %}
    <li>
      <a class="button is-light"
         href=""
         aria-disabled="true" disabled tabindex="-1" role="button"
         style="pointer-events:none; cursor:default">
        Esta turma já possui uma sucessora.
      </a>
    </li>
    {% if next_year_url %}
      <li><a class="button" href="{{ next_year_url }}">Ir para sucessora</a></li>
    {% endif %}
  {% endif %}

  {# Migrar alunos (se aplicável) #}
  {% if can_migrate_members and migrate_members_url %}
    <li>
      <a class="button" href="{{ migrate_members_url }}">Migrar alunos (ano anterior)</a>
    </li>
  {% endif %}

  {# Criar sequência apenas se ainda não existir sucessora #}
  {% if not has_next_year and original.pk %}
    <li>
      <a class="button" href="{% url 'admin:classes_studentclass_create_next_year' original.pk %}">
        Criar sequência (próximo ano)
      </a>
    </li>
  {% endif %}
{% endblock %}
